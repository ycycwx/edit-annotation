var app=angular.module("app",["ngCookies"]);app.controller("EditController",["$scope","$http","$cookies","$cookieStore",function(e,a,t,n){e.title="Schema Matching",e.filenames=[{name:"sony d100",data:[[["jd","型号","酷睿i5 4690K",!1],["yixun","型号","i5-4690k",!1]],[["jd","类型","CPU",!1]],[["jd","指令集","SSE 4.1/4.2, AVX 2.0",!1],["jd","主频","3.5GHz",!1],["yixun","二级缓存","1M",!1]],[["yixun","CPU主频范围","3.0GHz以上",!1]],[["yixun","三级缓存","6M",!1],["jd","三级缓存","6M",!1]],[["jd","特性","处理器显卡Intel? HD Graphics 4600，显卡基本频率350 MHz，.显卡最大动态频率1.2 GHz，最大内存大小32GB,内存通道数 2，内存类型DDR3-1333/1600",!1]],[["yixun","核心显卡型号","HD4600",!1]],[["yixun","耗电功率","89W",!1]],[["yixun","色系","蓝色系",!1]],[["yixun","超线程技术","不支持",!1]],[["yixun","CPU系列","酷睿i5",!1]],[["yixun","包装形式","原包",!1]],[["yixun","适用类型","台式",!1]],[["jd","接口类型","LGA1150",!1]],[["yixun","版本","i5-4690K",!1]],[["jd","系列","酷睿",!1]],[["yixun","保修时限","三年",!1]],[["yixun","CPU频率","3.5GHZ",!1]],[["jd","功率","88 W",!1]],[["jd","64位支持","是",!1],["yixun","64位技术","支持",!1]],[["yixun","制程工艺","22纳米",!1],["jd","制程工艺","22纳米",!1]],[["yixun","CPU插槽类型","LGA 1150",!1]],[["yixun","核心数量","四核心",!1],["jd","核心数量","四核",!1]],[["yixun","核心代号","Haswell-refresh",!1],["jd","核心代号","haswell",!1]],[["yixun","品牌","Intel/英特尔",!1],["jd","品牌","英特尔 Intel",!1]]]},{name:"samsung s5",data:[[["test1","key1","val1",!1],["test2","key2","val2",!1]]]},{name:"apple iphone6",data:[[["test1","key1","val1",!1],["test2","key2","val2",!1]]]}],e.selected=e.filenames[0],e.data=e.selected.data,e.file=e.selected.name,e.ths=["Select","Source","Key","Value"],console.log(e.data),e.update=function(){e.data=e.selected.data,e.file=e.selected.name},e.splitKeys=function(a){for(var t=e.data.indexOf(a),n=e.data.splice(t,1),l=0;l<n[0].length;l++)e.data.push([n[0][l]])},e.combineKeys=function(){var a=[];console.log(e.data);for(var t=e.data.length-1;t>=0;t--)if(1===e.data[t].length&&e.data[t][0][3]===!0){var n=e.data.splice(t,1);n[0][0][3]=!1,a.push(n[0][0])}0!==a.length&&e.data.push(a),console.log(e.data)},e.setTop=function(a,t){for(var n=0;n<e.data.length;n++)if(e.data[n]===t)for(var l=0;l<e.data[n].length;l++)if(e.data[n][l]===a){var i=e.data[n].splice(l,1);e.data[n].unshift(i[0])}},e.saveKeys=function(){a.post("/",{name:e.file,data:e.data}).success(function(e){console.log("write file successfully")}),alert("write file successfully")}}]),document.getElementById("uploadBtn").onchange=function(){var e=this.value,a=e.substring(e.lastIndexOf("\\")+1);document.getElementById("uploadFile").value=a},document.getElementById("uploadSubmit").onclick=function(){var e=document.getElementById("uploadFile");alert(""===e.value?"Please choose a json file":document.getElementById("uploadFile").value)};